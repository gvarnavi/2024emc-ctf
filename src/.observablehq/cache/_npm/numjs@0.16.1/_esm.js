/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/numjs@0.16.1/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"../ndarray@1.0.19/_esm.js";import t from"../cwise@1.0.10/_esm.js";import n from"../ndarray-ops@1.2.2/_esm.js";import r from"../ndarray-fft@1.0.3/_esm.js";import a from"../ndarray-gemm@1.0.0/_esm.js";import i from"../typedarray-pool@1.2.0/_esm.js";import s from"../lodash@4.17.21/_esm.js";function o(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var l={printThreshold:7,nFloatingValues:5},c={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array,array:Array},f={ValueError:function(){var e=Error.apply(this,arguments);return e.name=this.constructor.name,e},ConfigError:function(){var e=Error.apply(this,arguments);return e.name=this.constructor.name,e},NotImplementedError:function(){var e=Error.apply(this,arguments);return e.name=this.constructor.name,e}},u=c;function h(e){return"number"==typeof e}function p(e){return"function"==typeof e}var g={isNumber:h,isString:function(e){return"string"==typeof e},isFunction:p,flatten:function e(t,n,r){r=r||[];for(var a=-1,i=t.length;++a<i;){var s=t[a];h(s)?r[r.length]=s:n?e(s,n,r):r.push(s)}return r},shapeSize:function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},getType:function(e){return p(e)?e:u[e]||Array},getShape:function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t}(e):[e.length,t.length]:[e.length]:[]},defaults:s.defaults},y=e,d=t,v=n,m=a,w=r,b=i,A=l,x=f,q=g,k=function(){if(1===arguments.length)this.selection=arguments[0];else{if(0===arguments.length)throw new x.ValueError("Required argument 'data' not found");this.selection=y.apply(null,arguments)}Object.defineProperty(this,"size",{get:function(){return this.selection.size}.bind(this)}),Object.defineProperty(this,"shape",{get:function(){return this.selection.shape}.bind(this)}),Object.defineProperty(this,"ndim",{get:function(){return this.selection.shape.length}.bind(this)}),Object.defineProperty(this,"dtype",{get:function(){return this.selection.dtype}.bind(this),set:function(e){var t=q.getType(e);t!==q.getType(this.dtype)&&(this.selection=y(new t(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset))}.bind(this)}),Object.defineProperty(this,"T",{get:function(){return this.transpose()}.bind(this)})};k.prototype.get=function(){for(var e=arguments.length,t=0;t<e;t++)arguments[t]<0&&(arguments[t]+=this.shape[t]);return this.selection.get.apply(this.selection,arguments)},k.prototype.set=function(){return this.selection.set.apply(this.selection,arguments)},k.prototype.slice=function(){for(var e=this.ndim,t=new Array(e),n=new Array(e),r=new Array(e),a=this.shape,i=0;i<e;i++){var s=arguments[i];if(void 0===s)break;if(null!==s)if(q.isNumber(s))n[i]=s<0?s+a[i]:s,t[i]=null,r[i]=1;else if(4===s.length&&null===s[1]&&null===s[2]){var o=s[0]<0?s[0]+a[i]:s[0];n[i]=o,t[i]=null,r[i]=s[3]||1}else{var l=s[0]<0?s[0]+a[i]:s[0],c=s[1]<0?s[1]+a[i]:s[1];n[i]=c?l:0,t[i]=c?c-l:l,r[i]=s[2]||1}}var f=this.selection.lo.apply(this.selection,n),u=f.hi.apply(f,t),h=u.step.apply(u,r);return new k(h)},k.prototype.pick=function(e){return new k(this.selection.pick.apply(this.selection,arguments))},k.prototype.lo=function(){return new k(this.selection.lo.apply(this.selection,arguments))},k.prototype.hi=function(){return new k(this.selection.hi.apply(this.selection,arguments))},k.prototype.step=function(){return new k(this.selection.step.apply(this.selection,arguments))},k.prototype.flatten=function(){if(1===this.ndim)return new k(this.selection);var e=q.getType(this.dtype),t=q.flatten(this.tolist(),!0);return t instanceof e||(t=new e(t)),new k(t,[this.size])},k.prototype.reshape=function(e){if(0===arguments.length)throw new x.ValueError("function takes at least one argument (0 given)");if(1===arguments.length&&q.isNumber(e)&&-1===e&&(e=[q.shapeSize(this.shape)]),1===arguments.length&&q.isNumber(e)&&(e=[e]),arguments.length>1&&(e=[].slice.call(arguments)),e.filter((function(e){return-1===e})).length>1)throw new x.ValueError("can only specify one unknown dimension");var t=q.shapeSize(e);if(e=e.map(function(e){return-1===e?-1*this.size/t:e}.bind(this)),this.size!==q.shapeSize(e))throw new x.ValueError("total size of new array must be unchanged");var n,r,a,i,s=this.selection.shape,o=this.selection.offset,l=this.selection.stride,c=s.length,f=e.length;if(c===f){var u=!0;for(a=0;a<f;++a)if(s[a]!==e[a]){u=!1;break}if(u)return new k(this.selection.data,s,l,o)}else if(1===c){for(n=new Array(f),a=f-1,i=1;a>=0;--a)n[a]=i,i*=e[a];for(r=o,a=0;a<f;++a)n[a]<0&&(r-=(e[a]-1)*n[a]);return new k(this.selection.data,e,n,r)}var h=Math.min(c,f),p=!0;for(a=0;a<h;a++)if(s[a]!==e[a]){p=!1;break}if(p){for(n=new Array(f),a=0;a<f;a++)n[a]=l[a]||1;return r=o,new k(this.selection.data,e,n,r)}return this.flatten().reshape(e)},k.prototype.transpose=function(e){if(0===arguments.length){var t=this.ndim;e=new Array(t);for(var n=0;n<t;n++)e[n]=t-n-1}else arguments.length>1&&(e=arguments);return new k(this.selection.transpose.apply(this.selection,e))},k.prototype.dot=function(e){e=e instanceof k?e:j(e,this.dtype);var t=this.shape,n=e.shape;if(2===t.length&&2===n.length&&t[1]===n[0]){var r=q.getType(this.dtype),a=new k(new r(t[0]*n[1]),[t[0],n[1]]);return m(a.selection,this.selection,e.selection),a}if(1===t.length&&2===n.length&&t[0]===n[0])return this.reshape([t[0],1]).T.dot(e).reshape(n[1]);if(2===t.length&&1===n.length&&t[1]===n[0])return this.dot(e.reshape([n[0],1])).reshape(t[0]);if(1===t.length&&1===n.length&&t[0]===n[0])return this.reshape([t[0],1]).T.dot(e.reshape([n[0],1])).reshape([1]);throw new x.ValueError("cannot compute the matrix product of given arrays")},k.prototype.assign=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.assigns(n.selection,e),n):(e=j(e,this.dtype),v.assign(n.selection,e.selection),n)},k.prototype.add=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.addseq(n.selection,e),n):(e=j(e,this.dtype),v.addeq(n.selection,e.selection),n)},k.prototype.subtract=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.subseq(n.selection,e),n):(e=j(e,this.dtype),v.subeq(n.selection,e.selection),n)},k.prototype.multiply=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.mulseq(n.selection,e),n):(e=j(e,this.dtype),v.muleq(n.selection,e.selection),n)},k.prototype.divide=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.divseq(n.selection,e),n):(e=j(e,this.dtype),v.diveq(n.selection,e.selection),n)},k.prototype.pow=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.powseq(n.selection,e),n):(e=j(e,this.dtype),v.poweq(n.selection,e.selection),n)},k.prototype.exp=function(e){0===arguments.length&&(e=!0);var t=e?this.clone():this;return v.expeq(t.selection),t},k.prototype.log=function(e){0===arguments.length&&(e=!0);var t=e?this.clone():this;return v.logeq(t.selection),t},k.prototype.sqrt=function(e){0===arguments.length&&(e=!0);var t=e?this.clone():this;return v.sqrteq(t.selection),t},k.prototype.max=function(){return 0===this.selection.size?null:v.sup(this.selection)},k.prototype.min=function(){return 0===this.selection.size?null:v.inf(this.selection)},k.prototype.sum=function(){return v.sum(this.selection)},k.prototype.std=function(e){e=q.defaults(e,{ddof:0});var t=this.clone();v.powseq(t.selection,2);var n=this.mean(),r=q.shapeSize(this.shape),a=v.sum(t.selection)/(r-e.ddof)-n*n*r/(r-e.ddof);return a>0?Math.sqrt(Math.abs(a)):0},k.prototype.mean=function(){return v.sum(this.selection)/q.shapeSize(this.shape)},k.prototype.mod=function(e,t){1===arguments.length&&(t=!0);var n=t?this.clone():this;return q.isNumber(e)?(v.modseq(n.selection,e),n):(e=j(e,this.dtype),v.modeq(n.selection,e.selection),n)},k.prototype.tolist=function(){return I(this.selection)},k.prototype.valueOf=function(){return this.tolist()},k.prototype.toString=function(){var e=D(this.max()).length,t=/\[\s+\[/g;var n=JSON.stringify(this.tolist(),(function t(n,r){if(q.isString(r))return r;if(q.isNumber(r)){var a=D(r);return new Array(Math.max(0,e-a.length+2)).join(" ")+a}var i;n=n||0;var s=A.printThreshold,o=s/2|0;return i=r.length>s?[].concat(r.slice(0,o),[" ..."],r.slice(r.length-o)):r,new Array(n+1).join(" ")+"["+i.map((function(e,r){return t(0===r&&0===n?1:n+1,e)})).join(",")+"]"})).replace(/\]\,(\s*)\[/g,"],\n$1      [").replace(t,"[[").replace(t,"[[").replace(/\]\,(\s+)...\,(\s+)\[/g,"],\n$2       ...\n$2      [").slice(2,-1);return"array"===this.dtype?"array(["+n+")":"array(["+n+", dtype="+this.dtype+")"},k.prototype.inspect=k.prototype.toString,k.prototype.toJSON=function(){return JSON.stringify(this.tolist())},k.prototype.clone=function(){var e=this.selection;return void 0===e.data.slice?new k(y([].slice.apply(e.data),e.shape,e.stride,e.offset)):new k(y(e.data.slice(),e.shape,e.stride,e.offset))},k.prototype.equal=function(e){if(e=j(e),this.size!==e.size||this.ndim!==e.ndim)return!1;for(var t=this.ndim,n=0;n<t;n++)if(this.shape[n]!==e.shape[n])return!1;return v.equals(this.selection,e.selection)},k.prototype.round=function(e){0===arguments.length&&(e=!0);var t=e?this.clone():this;return v.roundeq(t.selection),t},k.prototype.negative=function(){var e=this.clone();return v.neg(e.selection,this.selection),e},k.prototype.diag=function(){var e=this.ndim;if(1===e){var t=q.getType(this.dtype),n=[this.shape[0],this.shape[0]],r=new k(new t(q.shapeSize(n)),n);"array"===r.dtype&&v.assigns(r.selection,0);for(var a=0;a<this.shape[0];a++)r.set(a,a,this.get(a));return r}var i=this.shape,s=this.selection.stride,o=1<<30,l=0;for(a=0;a<e;++a)o=0|Math.min(o,i[a]),l+=s[a];return new k(this.selection.data,[o],[l],this.selection.offset)},k.prototype.iteraxis=function(e,t){var n=this.shape;if(-1===e&&(e=n.length-1),e<0||e>n.length-1)throw new x.ValueError("invalid axis");for(var r=0;r<n[e];r++){for(var a=new Array(e+1),i=0;i<e+1;i++)a[i]=i===e?r:null;t(j(I(this.selection.pick.apply(this.selection,a)),this.dtype),r)}};var E=d({args:["array","array","array","array"],body:function(e,t,n,r){}}),z=d({args:["array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(e,t,n,r,a,i,s,o,l,c,f,u,h,p,g,y,d,v,m){}}),S=d({args:["index","array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-2,-2],array:1},{offset:[-2,-1],array:1},{offset:[-2,0],array:1},{offset:[-2,1],array:1},{offset:[-2,2],array:1},{offset:[-1,-2],array:1},{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[-1,2],array:1},{offset:[0,-2],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[0,2],array:1},{offset:[1,-2],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1},{offset:[1,2],array:1},{offset:[2,-2],array:1},{offset:[2,-1],array:1},{offset:[2,0],array:1},{offset:[2,1],array:1},{offset:[2,2],array:1}],body:function(e,t,n,r,a,i,s,o,l,c,f,u,h,p,g,y,d,v,m,w,b,A,x,q,k,E,z,S,j,N,V,T,I,D,M,O,F,P,C,U,R,H,L,$,_,J,B,G,K,Q,W,X){e[0]<2||e[1]}});function j(e,t){if(e instanceof k)return e;var n=q.getType(t);if(q.isNumber(e))return new k(n!==Array?new n([e]):[e],[1]);var r=q.getShape(e);return r.length>1&&(e=q.flatten(e,!0)),e instanceof n||(e=new n(e)),new k(e,r)}k.prototype.convolve=function(e){e=k.new(e);var t=this.ndim;if(t!==e.ndim)throw new x.ValueError("arrays must have the same dimensions");for(var n=new Array(t),r=new Array(t),a=this.selection,i=this.shape,s=e.selection,o=e.shape,l=0;l<t;l++){var c=i[l]-o[l]+1;if(c<0)throw new x.ValueError("filter cannot be greater than the array");n[l]=c,r[l]=-1}if(2===t&&3===o[0]&&3===o[1]){var f=new k(new Float32Array(q.shapeSize(i)),i);return z(f.selection,a,s.get(0,0),s.get(0,1),s.get(0,2),s.get(1,0),s.get(1,1),s.get(1,2),s.get(2,0),s.get(2,1),s.get(2,2)),f.lo(1,1).hi(n[0],n[1])}if(3===t&&1===o[2]&&1===i[2]&&3===o[0]&&3===o[1]){var u=new k(new Float32Array(q.shapeSize(i)),i);return z(u.selection.pick(null,null,0),a.pick(null,null,0),s.get(0,0,0),s.get(0,1,0),s.get(0,2,0),s.get(1,0,0),s.get(1,1,0),s.get(1,2,0),s.get(2,0,0),s.get(2,1,0),s.get(2,2,0)),u.lo(1,1).hi(n[0],n[1])}if(2===t&&5===o[0]&&5===o[1]){var h=new k(new Float32Array(q.shapeSize(i)),i);return S(h.selection,a,s.get(0,0),s.get(0,1),s.get(0,2),s.get(0,3),s.get(0,4),s.get(1,0),s.get(1,1),s.get(1,2),s.get(1,3),s.get(1,4),s.get(2,0),s.get(2,1),s.get(2,2),s.get(2,3),s.get(2,4),s.get(3,0),s.get(3,1),s.get(3,2),s.get(3,3),s.get(3,4),s.get(4,0),s.get(4,1),s.get(4,2),s.get(4,3),s.get(4,4)),h.lo(2,2).hi(n[0],n[1])}if(3===t&&1===o[2]&&1===i[2]&&5===o[0]&&5===o[1]){var p=new k(new Float32Array(q.shapeSize(i)),i);return S(p.selection,a,s.get(0,0,0),s.get(0,1,0),s.get(0,2,0),s.get(0,3,0),s.get(0,4,0),s.get(1,0,0),s.get(1,1,0),s.get(1,2,0),s.get(1,3,0),s.get(1,4,0),s.get(2,0,0),s.get(2,1,0),s.get(2,2,0),s.get(2,3,0),s.get(2,4,0),s.get(3,0,0),s.get(3,1,0),s.get(3,2,0),s.get(3,3,0),s.get(3,4,0),s.get(4,0,0),s.get(4,1,0),s.get(4,2,0),s.get(4,3,0),s.get(4,4,0)),p.lo(2,2).hi(n[0],n[1])}return this.fftconvolve(e)},k.prototype.fftconvolve=function(e){if(e=k.new(e),this.ndim!==e.ndim)throw new x.ValueError("arrays must have the same dimensions");var t,n=this.selection,r=e.selection,a=this.ndim,i=1,s=new Array(a),o=new Array(a),l=new Array(a);for(t=a-1;t>=0;--t)o[t]=n.shape[t],s[t]=i,i*=o[t],l[t]=n.shape[t]-r.shape[t]+1;var c=q.getType(n.dtype),f=new k(new c(q.shapeSize(l)),l),u=f.selection,h=b.mallocDouble(i),p=y(h,o,s,0);v.assigns(p,0),v.assign(p.hi.apply(p,n.shape),n);var g=b.mallocDouble(i),d=y(g,o,s,0);v.assigns(d,0),w(1,p,d);var m=b.mallocDouble(i),A=y(m,o,s,0);v.assigns(A,0),v.assign(A.hi.apply(A,r.shape),r);var z=b.mallocDouble(i),S=y(z,o,s,0);v.assigns(S,0),w(1,A,S),E(p,d,A,S),w(-1,p,d);var j,N=new Array(a),V=new Array(a),T=!1;for(t=0;t<a;++t)u.shape[t]>o[t]&&(T=!0),V[t]=r.shape[t]-1,N[t]=Math.min(u.shape[t],o[t]-V[t]);return T&&v.assign(u,0),j=(j=p.lo.apply(p,V)).hi.apply(j,N),v.assign(u.hi.apply(u,N),j),b.freeDouble(h),b.freeDouble(g),b.freeDouble(m),b.freeDouble(z),f},k.new=j;var N=k;function V(e,t){var n=0|e[t=t||0];if(n<=0)return[];var r,a=new Array(n);if(t===e.length-1)for(r=0;r<n;++r)a[r]=0;else for(r=0;r<n;++r)a[r]=V(e,t+1);return a}var T=d({args:["array","scalar","index"],body:function(e,t,n){var r,a=t;for(r=0;r<n.length-1;++r)a=a[n[r]];a[n[n.length-1]]=e}});function I(e){var t=V(e.shape,0);return T(e,t),t}function D(e){return String(Number((e||0).toFixed(A.nFloatingValues)))}function M(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var O=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,F=function(e){return O.exec(e).slice(1)};function P(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=M(B(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function C(e){var t=U(e),n="/"===G(e,-1);return(e=M(B(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function U(e){return"/"===e.charAt(0)}function R(){return C(B(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function H(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=P(e).substr(1),t=P(t).substr(1);for(var r=n(e.split("/")),a=n(t.split("/")),i=Math.min(r.length,a.length),s=i,o=0;o<i;o++)if(r[o]!==a[o]){s=o;break}var l=[];for(o=s;o<r.length;o++)l.push("..");return(l=l.concat(a.slice(s))).join("/")}function L(e){var t=F(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function $(e,t){var n=F(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function _(e){return F(e)[3]}var J={extname:_,basename:$,dirname:L,sep:"/",delimiter:":",relative:H,join:R,isAbsolute:U,normalize:C,resolve:P};function B(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var G="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},K=o(Object.freeze({__proto__:null,resolve:P,normalize:C,isAbsolute:U,join:R,relative:H,sep:"/",delimiter:":",dirname:L,basename:$,extname:_,default:J})),Q=N,W=t({args:["array","array","array"],pre:function(){this.isgray=!0},body:function(e,t,n){e===t&&t===n||(this.isgray=!1)},post:function(){return this.isgray}}),X=e,Y=N,Z=f,ee=function(e){e instanceof Q&&(e=e.selection);var t=e.shape;return 1!==t.length&&(2===t.length||3===t.length&&1===t[2]||3===t.length&&(3===t[2]||4===t[2])&&W(e.pick(null,null,0),e.pick(null,null,1),e.pick(null,null,2)))},te=function(e){if(e instanceof HTMLCanvasElement)return function(e){var t=e.getContext("2d").getImageData(0,0,e.width,e.height),n=[e.width,e.height,4],r=[4,4*e.width,1],a=X(new Uint8Array(t.data),n,r,0).transpose(1,0);ee(a)&&(a=a.pick(null,null,0));return new Y(a)}(e);if(e instanceof HTMLImageElement)return function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0);var r=n.getImageData(0,0,e.width,e.height),a=[e.width,e.height,4],i=[4,4*e.width,1],s=X(new Uint8Array(r.data),a,i,0).transpose(1,0);ee(s)&&(s=s.pick(null,null,0));return new Y(s)}(e);throw new Z.ValueError("expect input to be either an HTML Canvas or a (loaded) Image")};var ne=K,re=te,ae=ne.join(ne.resolve("/app/.cache/npm/numjs@0.16.1/src/images"),"../../data");function ie(e){return re(ne.join(ae,e))}var se={};Object.defineProperty(se,"digit",{get:function(){return ie("five.png")}}),Object.defineProperty(se,"five",{get:function(){return ie("five.png")}}),Object.defineProperty(se,"node",{get:function(){return ie("nodejs.png")}}),Object.defineProperty(se,"lena",{get:function(){return ie("lenna.png")}}),Object.defineProperty(se,"lenna",{get:function(){return ie("lenna.png")}}),Object.defineProperty(se,"moon",{get:function(){return ie("moon.jpg")}});var oe=se,le={},ce=N;le.getRawData=function(e){var t,n;e instanceof ce&&(e=e.selection);var r=0,a=e.shape,i=a[0],s=a[1],o=a[2]||1,l=new Uint8Array(i*s*o);if(3===e.shape.length)if(3===o)for(t=0;t<i;++t)for(n=0;n<s;++n)l[r++]=e.get(t,n,0),l[r++]=e.get(t,n,1),l[r++]=e.get(t,n,2);else if(4===o)for(t=0;t<i;++t)for(n=0;n<s;++n)l[r++]=e.get(t,n,0),l[r++]=e.get(t,n,1),l[r++]=e.get(t,n,2),l[r++]=e.get(t,n,3);else{if(1!==o)return new Error("Incompatible array shape");for(t=0;t<i;++t)for(n=0;n<s;++n)l[r++]=e.get(t,n,0)}else{if(2!==e.shape.length)return new Error("Invalid image");for(t=0;t<i;++t)for(n=0;n<s;++n)l[r++]=e.get(t,n)}return l},le.setRawData=function(e,t){var n,r,a,i=0,s=e.shape[0],o=e.shape[1],l=e.shape[2]||1;if(3===e.shape.length)if(3===l)for(n=0;n<s;++n)for(r=0;r<o;++r)t[i++]=e.get(n,r,0),t[i++]=e.get(n,r,1),t[i++]=e.get(n,r,2),t[i++]=255;else if(4===l)for(n=0;n<s;++n)for(r=0;r<o;++r)t[i++]=e.get(n,r,0),t[i++]=e.get(n,r,1),t[i++]=e.get(n,r,2),t[i++]=e.get(n,r,3);else{if(1!==l)return new Error("Incompatible array shape");for(n=0;n<s;++n)for(r=0;r<o;++r)a=e.get(n,r,0),t[i++]=a,t[i++]=a,t[i++]=a,t[i++]=255}else{if(2!==e.shape.length)return new Error("Invalid image");for(n=0;n<s;++n)for(r=0;r<o;++r)a=e.get(n,r),t[i++]=a,t[i++]=a,t[i++]=a,t[i++]=255}};var fe=le,ue=f,he=le,pe=e,ge=N,ye=N,de=g,ve=t({args:["array","array","array","array"],body:function(e,t,n,r){}}),me=function(e){e instanceof ye||(e=new ye(e));var t=e.shape,n=t[0],r=t[1];if(1===(t[2]||1))return e;var a=[n,r],i=new ye(new Uint8Array(de.shapeSize(a)),a),s=e.selection.pick(null,null,0),o=e.selection.pick(null,null,1),l=e.selection.pick(null,null,2);return ve(i.selection,s,o,l),i},we=N,be=me,Ae=t({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],body:function(e,t,n,r,a,i){0!==n[0]&&0!==n[1]||0===n[0]&&0===n[1]||n[0]}}),xe=N,qe=me,ke=t({args:["array","array","index",{offset:[-1,-1],array:0},{offset:[-1,0],array:0},{offset:[0,-1],array:0}],body:function(e,t,n,r,a,i){0!==n[0]&&0!==n[1]||0===n[0]&&0===n[1]||n[0]}}),Ee=n,ze=N,Se=g,je=me,Ne=t({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(e,t,n,r,a,i,s,o,l,c){}}),Ve=n,Te=N,Ie=g,De=me,Me=t({args:["array","array",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(e,t,n,r,a,i,s,o,l,c){}}),Oe=function(e,t,n,r,a){var i=t-1,s=t+r-1,o=e-1,l=e+n-1;return 0!==t&&0!==e?a.selection.get(o,i)-a.selection.get(l,i)-a.selection.get(o,s)+a.selection.get(l,s):0===t&&0===e?a.selection.get(e+n-1,t+r-1):0===t?-a.selection.get(o,t+r-1)+a.selection.get(e+n-1,t+r-1):-a.selection.get(l,i)+a.selection.get(l,s)},Fe=Oe,Pe=N,Ce={data:oe,read:te,save:function(e,t){var n=e.shape,r=n[0],a=n[1];if(!(t instanceof HTMLCanvasElement))throw new ue.ValueError("expect input to be either an HTML Canvas or a (loaded) Image");var i=document.createElement("canvas");i.height=r,i.width=a;var s=i.getContext("2d"),o=s.createImageData(a,r),l=fe.setRawData(e.selection,o.data);if(l)throw l;s.putImageData(o,0,0),s.drawImage(i,a,r),t.getContext("2d").drawImage(i,0,0,a,r,0,0,t.width,t.height)},resize:function(e,t,n){var r=e.shape,a=r[0],i=r[1],s=r[2]||1,o=document.createElement("canvas");o.height=a,o.width=i;var l=o.getContext("2d"),c=l.createImageData(i,a),f=he.setRawData(e.selection,c.data);if(f)throw f;var u=a/t,h=i/n,p=Math.min(u,h),g=t*p,y=n*p,d=(a-p*t)/2,v=(i-p*n)/2;l.putImageData(c,0,0),l.drawImage(o,v,d,y,g,0,0,n,t);var m=l.getImageData(0,0,n,t),w=[0|n,0|t,4],b=[4,4*n|0,1],A=pe(new Uint8Array(m.data),w,b,0).transpose(1,0);return(2===r.length||3===r.length&&1===s)&&(A=A.pick(null,null,0)),new ge(A)},sat:function(e){var t=be(e),n=t.shape,r=n[0],a=n[1],i=new we(new Uint32Array(r*a),[r,a]);return Ae(i.selection,t.selection),i},ssat:function(e){var t=qe(e),n=t.shape,r=n[0],a=n[1],i=new xe(new Uint32Array(r*a),[r,a]);return ke(i.selection,t.selection),i},sobel:function(e){var t=je(e),n=t.shape,r=n[0],a=n[1],i=new ze(new Float32Array(Se.shapeSize(n)),n);return Ne(i.selection,t.selection),Ee.assigns(i.selection.pick(0,null),0),Ee.assigns(i.selection.pick(null,0),0),Ee.assigns(i.selection.pick(r-1,null),0),Ee.assigns(i.selection.pick(null,a-1),0),i.divide(4*Math.sqrt(2),!1)},scharr:function(e){var t=De(e),n=t.shape,r=n[0],a=n[1],i=new Te(new Float32Array(Ie.shapeSize(n)),n);return Me(i.selection,t.selection),Ve.assigns(i.selection.pick(0,null),0),Ve.assigns(i.selection.pick(null,0),0),Ve.assigns(i.selection.pick(r-1,null),0),Ve.assigns(i.selection.pick(null,a-1),0),i.divide(16*Math.sqrt(2),!1)},areaSum:Oe,areaValue:function(e,t,n,r,a){return Fe(e,t,n,r,a)/(n*r)},rgb2gray:me,flip:function(e){return new Pe(e.selection.step(null,-1))}},Ue=e,Re=t,He=n,Le=r,$e=l,_e=c,Je=N,Be=g,Ge=f;function Ke(e,t){return Je.new(e).mod(t)}function Qe(e,t){return Je.new(e).transpose(t)}function We(e,t,n,r){if(1===arguments.length)return We(0,e,1,void 0);if(2===arguments.length&&Be.isNumber(t))return We(e,t,1,void 0);if(2===arguments.length)return We(0,e,1,t);if(3===arguments.length&&!Be.isNumber(n))return We(e,t,1,n);for(var a=[],i=0;e<t;)a[i++]=e,e+=n;return Je.new(a,r)}function Xe(e,t){Be.isNumber(e)&&e>=0&&(e=[e]);var n=Be.shapeSize(e),r=Be.getType(t),a=new Je(new r(n),e);return"array"===a.dtype&&He.assigns(a.selection,0),a}function Ye(e,t){Be.isNumber(e)&&e>=0&&(e=[e]);var n=Be.shapeSize(e),r=Be.getType(t),a=new Je(new r(n),e);return He.assigns(a.selection,1),a}var Ze=Re({args:["array","scalar"],body:function(e,t){}});var et=Re({args:["array","scalar","scalar"],body:function(e,t,n){}});var tt=Re({args:["array","scalar"],body:function(e,t){}});var nt=Re({args:["array"],body:function(e){}});function rt(e){var t=e instanceof Je?e.clone():Je.new(e);return He.abseq(t.selection),t}function at(e){var t,n;for(arguments.length>1&&(e=[].slice.call(arguments)),t=0;t<e.length;t++)n=e[t],e[t]=n instanceof Je?n.tolist():Be.isNumber(n)?[n]:n;var r=e[0];for(t=1;t<e.length;t++){n=e[t];var a=Be.getShape(r),i=Be.getShape(n);if(a.length!==i.length)throw new Ge.ValueError("all the input arrays must have same number of dimensions");if(1===a.length&&1===i.length)r=r.concat(n);else if(2===a.length&&2===i.length&&a[0]===i[0]||1===a.length&&2===i.length&&a[0]===i[0]||2===a.length&&1===i.length&&a[0]===i[0])for(var s=0;s<a[0];s++)r[s]=r[s].concat(n[s]);else{if(!(3===a.length&&3===i.length&&a[0]===i[0]&&a[1]===i[1]||2===a.length&&3===i.length&&a[0]===i[0]&&a[1]===i[1]||3===a.length&&2===i.length&&a[0]===i[0]&&a[1]===i[1]))throw new Ge.ValueError('cannot concatenate  "'+a+'" with "'+i+'"');for(var o=0;o<a[0];o++){for(var l=new Array(a[1]),c=0;c<a[1];c++)l[c]=r[o][c].concat(n[o][c]);r[o]=l}}}return Je.new(r,e[0].dtype)}function it(e,t){for(var n=Ye((e=Je.new(e)).ndim).tolist(),r=t;r<0;)r+=e.ndim;if(void 0===n[r])throw new Ge.ValueError("axis="+t+"invalid for the "+e.ndim+"-dimensional input array");return n[r]=-1,e.step.apply(e,n)}var st={config:$e,dtypes:_e,NdArray:Je,ndarray:Ue,array:Je.new,arange:We,reshape:function(e,t){return Je.new(e).reshape(t)},zeros:Xe,ones:Ye,empty:function(e,t){Be.isNumber(e)&&e>=0&&(e=[e]);var n=Be.shapeSize(e),r=Be.getType(t);return new Je(new r(n),e)},flatten:function(e){return Je.new(e).flatten()},flip:it,random:function(e){if(0===arguments.length)return Je.new(Math.random());e=1===arguments.length?Be.isNumber(e)?[0|e]:e:[].slice.call(arguments);var t=Be.shapeSize(e),n=new Je(new Float64Array(t),e);return He.random(n.selection),n},softmax:function(e){var t=Je.new(e).exp(),n=t.sum();return He.divseq(t.selection,n),t},sigmoid:function(e,t){return e=Je.new(e).clone(),t=t||1,Ze(e.selection,t),e},leakyRelu:function(e,t){t=t||.001;var n=e instanceof Je?e.clone():Je.new(e);return tt(n.selection,t),n},abs:rt,arccos:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.acoseq(t.selection),t},arcsin:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.asineq(t.selection),t},arctan:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.ataneq(t.selection),t},cos:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.coseq(t.selection),t},sin:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.sineq(t.selection),t},tan:function(e){var t=e instanceof Je?e.clone():Je.new(e);return He.taneq(t.selection),t},tanh:function(e){var t=e instanceof Je?e.clone():Je.new(e);return nt(t.selection),t},clip:function(e,t,n){1===arguments.length?(t=0,n=1):2===arguments.length&&(n=1);var r=e instanceof Je?e.clone():Je.new(e);return et(r.selection,t,n),r},exp:function(e){return Je.new(e).exp()},log:function(e){return Je.new(e).log()},sqrt:function(e){return Je.new(e).sqrt()},power:function(e,t){return Je.new(e).pow(t)},sum:function(e){return Je.new(e).sum()},mean:function(e){return Je.new(e).mean()},std:function(e,t){return Je.new(e).std(t)},dot:function(e,t){return Je.new(e).dot(t)},add:function(e,t){return Je.new(e).add(t)},subtract:function(e,t){return Je.new(e).subtract(t)},multiply:function(e,t){return Je.new(e).multiply(t)},divide:function(e,t){return Je.new(e).divide(t)},negative:function(e){return Je.new(e).negative()},equal:function(e,t){return Je.new(e).equal(t)},max:function(e){return Je.new(e).max()},min:function(e){return Je.new(e).min()},mod:Ke,remainder:Ke,concatenate:at,transpose:Qe,errors:Ge,broadcast:function(e,t){if(0!==e.length&&0!==t.length){for(var n=e.slice().reverse(),r=t.slice().reverse(),a=Math.max(e.length,t.length),i=new Array(a),s=0;s<a;s++)if(n[s]&&1!==n[s])if(r[s]&&1!==r[s]){if(n[s]!==r[s])return;i[s]=n[s]}else i[s]=n[s];else i[s]=r[s];return i.reverse()}},round:function(e){return Je.new(e).round()},convolve:function(e,t){return Je.new(e).convolve(t)},fftconvolve:function(e,t){return Je.new(e).fftconvolve(t)},fft:function(e){var t=(e=e instanceof Je?e.clone():Je.new(e)).shape,n=t.length;if(2!==t[n-1])throw new Ge.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var r=new Array(n),a=new Array(n);return r[n-1]=0,a[n-1]=1,Le(1,e.selection.pick.apply(e.selection,r),e.selection.pick.apply(e.selection,a)),e},ifft:function(e){var t=(e=e instanceof Je?e.clone():Je.new(e)).shape,n=t.length;if(2!==t[n-1])throw new Ge.ValueError("expect last dimension of the array to have 2 values (for both real and imaginary part)");var r=new Array(n),a=new Array(n);return r[n-1]=0,a[n-1]=1,Le(-1,e.selection.pick.apply(e.selection,r),e.selection.pick.apply(e.selection,a)),e},diag:function(e){return Je.new(e).diag()},identity:function(e,t){for(var n=Xe([e,e],t),r=0;r<e;r++)n.set(r,r,1);return n},stack:function(e,t){if(t=t||0,!e||0===e.length)throw new Ge.ValueError("need at least one array to stack");for(var n,r=(e=e.map((function(e){return Be.isNumber(e)?e:Je.new(e)})))[0].shape||[],a=1;a<e.length;a++)for(var i=e[a].shape||[],s=Math.max(r.length,i.length),o=0;o<s;o++)if(r[o]!==i[o])throw new Ge.ValueError("all input arrays must have the same shape");if(0===r.length)n=at(e);else{n=Xe([e.length].concat(r));for(a=0;a<e.length;a++)n.pick(a).assign(e[a],!1)}if(t){t<0&&(t=n.ndim+t);var l=n.ndim,c=new Array(l);for(a=0;a<l;a++)c[a]=a<t?a+1:a===t?0:a;return n.transpose(c)}return n},rot90:function(e,t,n){for(t=t||1;t<0;)t+=4;if(t%=4,e=Je.new(e),1!==(n=Je.new(n||[0,1])).shape.length||2!==n.shape[0])throw new Ge.ValueError("len(axes) must be 2");if((n=n.tolist())[0]===n[1]||rt(n[0]-n[1])===e.ndim)throw new Ge.ValueError("Axes must be different.");if(0===t)return e;if(2===t)return it(it(e,n[0]),n[1]);var r=We(e.ndim).tolist(),a=r[n[0]];return r[n[0]]=r[n[1]],r[n[1]]=a,1===t?Qe(it(e,n[1]),r):it(Qe(e,r),n[1])},int8:function(e){return Je.new(e,"int8")},uint8:function(e){return Je.new(e,"uint8")},int16:function(e){return Je.new(e,"int16")},uint16:function(e){return Je.new(e,"uint16")},int32:function(e){return Je.new(e,"int32")},uint32:function(e){return Je.new(e,"uint32")},float32:function(e){return Je.new(e,"float32")},float64:function(e){return Je.new(e,"float64")},images:Ce},ot=st.NdArray,lt=st.abs,ct=st.add,ft=st.arange,ut=st.arccos,ht=st.arcsin,pt=st.arctan,gt=st.array,yt=st.broadcast,dt=st.clip,vt=st.concatenate,mt=st.config,wt=st.convolve,bt=st.cos,At=st.diag,xt=st.divide,qt=st.dot,kt=st.dtypes,Et=st.empty,zt=st.equal,St=st.errors,jt=st.exp,Nt=st.fft,Vt=st.fftconvolve,Tt=st.flatten,It=st.flip,Dt=st.float32,Mt=st.float64,Ot=st.identity,Ft=st.ifft,Pt=st.images,Ct=st.int16,Ut=st.int32,Rt=st.int8,Ht=st.leakyRelu,Lt=st.log,$t=st.max,_t=st.mean,Jt=st.min,Bt=st.mod,Gt=st.multiply,Kt=st.ndarray,Qt=st.negative,Wt=st.ones,Xt=st.power,Yt=st.random,Zt=st.remainder,en=st.reshape,tn=st.rot90,nn=st.round,rn=st.sigmoid,an=st.sin,sn=st.softmax,on=st.sqrt,ln=st.stack,cn=st.std,fn=st.subtract,un=st.sum,hn=st.tan,pn=st.tanh,gn=st.transpose,yn=st.uint16,dn=st.uint32,vn=st.uint8,mn=st.zeros;export{ot as NdArray,lt as abs,ct as add,ft as arange,ut as arccos,ht as arcsin,pt as arctan,gt as array,yt as broadcast,dt as clip,vt as concatenate,mt as config,wt as convolve,bt as cos,st as default,At as diag,xt as divide,qt as dot,kt as dtypes,Et as empty,zt as equal,St as errors,jt as exp,Nt as fft,Vt as fftconvolve,Tt as flatten,It as flip,Dt as float32,Mt as float64,Ot as identity,Ft as ifft,Pt as images,Ct as int16,Ut as int32,Rt as int8,Ht as leakyRelu,Lt as log,$t as max,_t as mean,Jt as min,Bt as mod,Gt as multiply,Kt as ndarray,Qt as negative,Wt as ones,Xt as power,Yt as random,Zt as remainder,en as reshape,tn as rot90,nn as round,rn as sigmoid,an as sin,sn as softmax,on as sqrt,ln as stack,cn as std,fn as subtract,un as sum,hn as tan,pn as tanh,gn as transpose,yn as uint16,dn as uint32,vn as uint8,mn as zeros};
