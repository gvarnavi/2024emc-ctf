/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/cwise-parser@1.0.3/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import e from"../esprima@1.2.5/_esm.js";import n from"../uniq@1.0.1/_esm.js";var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=e,i=n,o=0;function a(e,n,r){this.name=e,this.lvalue=n,this.rvalue=r,this.count=0}function s(e,n,r,t){this.body=e,this.args=n,this.thisVars=r,this.localVars=t}var l=function(e){for(var n=["(",e,")()"].join(""),l=t.parse(n,{range:!0}),p="_inline_"+o+++"_",f=function(e){for(var n=e.body[0].expression.callee.params,r=new Array(n.length),t=0;t<n.length;++t)r[t]=n[t].name;return r}(l),u=new Array(f.length),d=0;d<f.length;++d)u[d]=new a([p,"arg",d,"_"].join(""),!1,!1);for(var y=new Array(n.length),h=(d=0,n.length);d<h;++d)y[d]=n.charAt(d);var c,g=[],w=[];function v(e,n){for(var r=e.range[0],t=e.range[1],i=r+1;i<t;++i)y[i]="";y[r]=n}return function e(n,t){if(n.parent=t,"MemberExpression"===n.type)n.computed?(e(n.object,n),e(n.property,n)):"ThisExpression"===n.object.type?v(n,(m=n.property.name,b="this_"+m.replace(/\_/g,"__"),w.push(b),b)):e(n.object,n);else{if("ThisExpression"===n.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===n.type){var i=n.name,o=f.indexOf(i);if(o>=0){var a=u[o],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?1:3:"UpdateExpression"===e.parent.type?3:2}(n);1&s&&(a.lvalue=!0),2&s&&(a.rvalue=!0),++a.count,v(n,a.name)}else(function(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:void 0!==r?e in r:"undefined"!=typeof self&&e in self})(i)||v(n,function(e){var n=p+e.replace(/\_/g,"__");return g.push(n),n}(i))}else if("Literal"===n.type)"string"==typeof n.value&&v(n,"'"+n.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===n.type)throw new Error("cwise-parser: with() statements not allowed");for(var l=Object.keys(n),d=0,y=l.length;d<y;++d)if("parent"!==l[d]){var h=n[l[d]];if(h)if(h instanceof Array)for(var c=0;c<h.length;++c)h[c]&&"string"==typeof h[c].type&&e(h[c],n);else"string"==typeof h.type&&e(h,n)}}}var m,b}(l.body[0].expression.callee.body,void 0),i(g),i(w),new s((c=l.body[0].expression.callee.body,y.slice(c.range[0],c.range[1]).join("")),u,w,g)};export{l as default};
