/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/ndarray-gemm@1.0.0/gemm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var p=function(p,h,n,t,e){var f=["gemm",p[0],p[1],"a",h[0],h[1],"b",n[0],n[1],t?"alpha":"",e?"beta":""].join(""),j=["function ",f,"(o,a,b,A,B){","var ",i("o",p),i("a",h),i("b",n),"i,j,k;"];"r"===h[0]&&"c"===n[0]?j.push.apply(j,function(p,r,i,h,n){var t=[],e="r"===p[0]?[1,0]:[0,1],f=[1,0],j=[0,1],v=["i","j"];t.push.apply(t,s(e,"o",p)),e[1]?(t.push("for(j=0;j<od1;++j){"),t.push("for(i=0;i<od0;++i){")):(t.push("for(i=0;i<od0;++i){"),t.push("for(j=0;j<od1;++j){"));t.push.apply(t,s(f,"a",r,"i")),t.push.apply(t,s(j,"b",i,void 0,"j")),t.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",o(f,"a",r,"i","k"),"*",o(j,"b",i,"k","j"),";"),t.push.apply(t,u(f,"a",r,0,"k")),t.push.apply(t,u(j,"b",i,0,"k")),t.push("}"),h&&t.push("r*=A;");n&&t.push("r+=B*",o(e,"o",p,"i","j"),";");return t.push.apply(t,a(e,"o",p,"i","j","r")),t.push.apply(t,u(e,"o",p,0,v[1])),t.push("}"),t.push.apply(t,u(e,"o",p,1,v[0])),t.push("}"),t}(p,h,n,t,e)):j.push.apply(j,function(p,i,h,n,t){var e=[],f=["od0","od1","ad1"],j=[1,0],v=[1,0],d=[0,1];e.push.apply(e,function(p,r){var i,h=[],n="r"===p[0]?[1,0]:[0,1];r&&h.push("if(B!==1.0){");h.push.apply(h,s(n,"o",p)),n[0]?(h.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),i=["i","j"]):(h.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),i=["j","i"]);r?h.push.apply(h,a(n,"o",p,"i","j","B*"+o(n,"o",p,"i","j"))):h.push.apply(h,a(n,"o",p,"i","j","0"));h.push.apply(h,u(n,"o",p,0,i[1])),h.push("}"),h.push.apply(h,u(n,"o",p,1,i[0])),h.push("}"),r&&h.push("}");return h}(p,t));for(var y=0;y<3;++y)e.push("for(var i",y,"=",f[y],";i",y,">0;){","var w",y,"=",r,";","if(i",y,"<",r,"){","w",y,"=i",y,";","i",y,"=0;","}else{","i",y,"-=",r,";","}");e.push.apply(e,s(j,"o",p,"i0","i1","w1")),e.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),e.push.apply(e,s(v,"a",i,"(i0+i)","i2")),e.push.apply(e,s(d,"b",h,"i2","(i1+j)")),e.push("for(k=0;k<w2;++k){"),e.push("r+=",o(v,"a",i,"(i0+i)","(i2+k)"),"*",o(d,"b",h,"(i2+k)","(i1+j)"),";"),e.push.apply(e,u(v,"a",i,0,"(i2+k)")),e.push.apply(e,u(d,"b",h,0,"(i2+k)")),e.push("}");var l="r";n&&(l="A*r");return e.push.apply(e,a(j,"o",p,"(i0+i)","(i1+j)",l+"+"+o(j,"o",p,"(i0+i)","(i1+j)"))),e.push.apply(e,u(j,"o",p,0,"(i1+j)")),e.push("}"),e.push.apply(e,u(j,"o",p,1,"(i0+i)")),e.push("}}}}"),e}(p,h,n,t,e));return j.push("}return ",f),new Function(j.join(""))()},r=32;function i(p,r){return"native"===r[1]?[p,"d0=",p,".length,",p,"d1=",p,"[0].length,"].join(""):[p,"d0=",p,".shape[0],",p,"d1=",p,".shape[1],",p,"s0=",p,".stride[0],",p,"s1=",p,".stride[1],",p,"o=",p,".offset,",p,"d=",p,".data,"].join("")}function s(p,r,i,s,u,a){var o=[];return"native"===i[1]?p[0]&&(s?o.push("var ",r,"p=",r,"[",s,"];"):o.push("var ",r,"p=",r,"[0];")):s&&u?a?o.push("var ",r,"t0=",r,"s",p[0],",",r,"t1=",r,"s",p[1],"-",r,"s",p[0],"*",a,",",r,"p=",r,"o+",s,"*",r,"s0+",u,"*",r,"s1;"):o.push("var ",r,"t0=",r,"s",p[0],",",r,"p=",r,"o+",s,"*",r,"s0+",u,"*",r,"s1;"):s?o.push("var ",r,"t0=",r,"s",p[0],",",r,"p=",r,"o+",s,"*",r,"s0;"):u?o.push("var ",r,"t0=",r,"s",p[0],",",r,"p=",r,"o+",u,"*",r,"s1;"):o.push("var ",r,"t0=",r,"s",p[0],",",r,"t1=",r,"s",p[1],"-",r,"s",p[0],"*",r,"d",p[0],",",r,"p=",r,"o;"),o}function u(p,r,i,s,u){var a=[];return"native"===i[1]?p[0]&&1===s&&a.push(r,"p=",r,"[",u,"+1]"):a.push(r,"p+=",r,"t",s,";"),a}function a(p,r,i,s,u,a){var o=[];return"native"===i[1]?p[0]?o.push(r,"p[",u,"]=",a,";"):o.push(r,"[",s,"][",u,"]=",a,";"):"generic"===i[1]?o.push(r,"d.set(",r,"p,",a,");"):o.push(r,"d[",r,"p]=",a,";"),o}function o(p,r,i,s,u){var a=[];return"native"===i[1]?p[0]?a.push(r,"p[",u,"]"):a.push(r,"[",s,"][",u,"]"):"generic"===i[1]?a.push(r,"d.get(",r,"p)"):a.push(r,"d[",r,"p]"),a.join("")}var h=function(p,r,i,s,u){void 0===s&&(s=1);void 0===u&&(u=0);var a=1!==s,o=0!==u,h=e(p),j=e(r),v=e(i);!function(p,r,i){var s=t(p),u=t(r),a=t(i);if(s[0]!==u[0]||s[1]!==a[1]||u[1]!==a[0])throw new Error("Mismatched array shapes for matrix product")}(p,r,i);var d=[h,j,v,a,o].join(":"),y=f[d];y||(y=f[d]=n(h,j,v,a,o));return y(p,r,i,s,u)},n=p;function t(p){return Array.isArray(p)?[p.length,p[0].length]:p.shape}function e(p){if(Array.isArray(p)){if(Array.isArray(p))return["r","native"]}else if(p.shape&&2===p.shape.length)return p.order[0]?["r",p.dtype]:["c",p.dtype];throw new Error("Unrecognized data type")}var f={};export{h as default};
