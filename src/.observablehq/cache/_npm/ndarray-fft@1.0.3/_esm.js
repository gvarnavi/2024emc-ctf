/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/ndarray-fft@1.0.3/fft.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import r from"../ndarray-ops@1.2.2/_esm.js";import o from"../ndarray@1.0.19/_esm.js";import a from"../typedarray-pool@1.2.0/_esm.js";import s from"../bit-twiddle@1.0.2/_esm.js";var e={exports:{}},t=s;function f(r,o,a,s,e,f){var i,n,m,p,c,l,h,y,d,u,v,g,w,x,M,P,b,q,z,A,D,E,F,I;for(r|=0,o|=0,e|=0,f|=0,i=a|=0,n=t.log2(i),q=0;q<o;++q){for(h=i>>1,c=0,m=0;m<i-1;m++){for(m<c&&(w=s[e+m],s[e+m]=s[e+c],s[e+c]=w,w=s[f+m],s[f+m]=s[f+c],s[f+c]=w),l=h;l<=c;)c-=l,l>>=1;c+=l}for(v=-1,g=0,u=1,y=0;y<n;y++){for(d=u,u<<=1,P=1,b=0,c=0;c<d;c++){for(m=c;m<i;m+=u)z=s[e+(p=m+d)],A=s[f+p],D=s[e+m],E=s[f+m],x=(F=P*(z+A))-A*(P+b),M=F+(I=z*(b-P)),s[e+p]=D-x,s[f+p]=E-M,s[e+m]+=x,s[f+m]+=M;I=P*(g-v),P=(F=v*(P+b))-b*(v+g),b=F+I}g=Math.sqrt((1-v)/2),r<0&&(g=-g),v=Math.sqrt((1+v)/2)}if(r<0){var S=1/i;for(m=0;m<i;m++)s[e+m]*=S,s[f+m]*=S}e+=a,f+=a}}e.exports=function(r,o,a,s,e,i,n){r|=0,o|=0,a|=0,e|=0,i|=0,t.isPow2(a)?f(r,o,a,s,e,i):function(r,o,a,s,e,i,n){r|=0,o|=0,a|=0,e|=0,i|=0,n|=0;var m,p,c,l,h,y,d,u,v,g=t.nextPow2(2*a+1),w=n,x=w+a,M=x+a,P=M+g,b=P+g,q=b+g,z=-r*Math.PI/a;for(v=0;v<a;++v)p=z*(v*v%(2*a)),l=Math.cos(p),h=Math.sin(p),s[b+(g-v)]=s[b+v]=s[w+v]=l,s[q+(g-v)]=s[q+v]=s[x+v]=h;for(v=a;v<=g-a;++v)s[b+v]=0;for(v=a;v<=g-a;++v)s[q+v]=0;f(1,1,g,s,b,q),z=r<0?1/a:1;for(m=0;m<o;++m){for(v=0;v<a;++v)p=s[e+v],c=s[i+v],y=(l=s[w+v])*(p+c),d=p*((h=-s[x+v])-l),u=c*(l+h),s[M+v]=y-u,s[P+v]=y+d;for(v=a;v<g;++v)s[M+v]=0;for(v=a;v<g;++v)s[P+v]=0;for(f(1,1,g,s,M,P),v=0;v<g;++v)p=s[M+v],c=s[P+v],y=(l=s[b+v])*(p+c),d=p*((h=s[q+v])-l),u=c*(l+h),s[M+v]=y-u,s[P+v]=y+d;for(f(-1,1,g,s,M,P),v=0;v<a;++v)p=s[M+v],c=s[P+v],y=(l=s[w+v])*(p+c),d=p*((h=-s[x+v])-l),u=c*(l+h),s[e+v]=z*(y-u),s[i+v]=z*(y+d);e+=a,i+=a}}(r,o,a,s,e,i,n)},e.exports.scratchMemory=function(r){return t.isPow2(r)?0:2*r+4*t.nextPow2(2*r+1)};var i=r,n=o,m=a,p=e.exports;var c=function(r,o,a){var s,e,t=o.shape,f=t.length,c=1,l=new Array(f),h=0;for(s=f-1;s>=0;--s)if(l[s]=c,c*=t[s],h=Math.max(h,p.scratchMemory(t[s])),o.shape[s]!==a.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var y,d=4*c+h;y="array"===o.dtype||"float64"===o.dtype||"custom"===o.dtype?m.mallocDouble(d):m.mallocFloat(d);var u,v,g,w,x=n(y,t.slice(0),l,0),M=n(y,t.slice(0),l.slice(0),c),P=n(y,t.slice(0),l.slice(0),2*c),b=n(y,t.slice(0),l.slice(0),3*c),q=4*c;for(i.assign(x,o),i.assign(M,a),s=f-1;s>=0&&(p(r,c/t[s],t[s],y,x.offset,M.offset,q),0!==s);--s){for(v=1,g=P.stride,w=b.stride,e=s-1;e<f;++e)w[e]=g[e]=v,v*=t[e];for(e=s-2;e>=0;--e)w[e]=g[e]=v,v*=t[e];i.assign(P,x),i.assign(b,M),u=x,x=P,P=u,u=M,M=b,b=u}i.assign(o,x),i.assign(a,M),m.free(y)};export{c as default};
